<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.9.5">Jekyll</generator><link href="https://leosilvagomes.github.io/repositorio-de-bordo/feed.xml" rel="self" type="application/atom+xml" /><link href="https://leosilvagomes.github.io/repositorio-de-bordo/" rel="alternate" type="text/html" /><updated>2025-06-18T13:40:38+00:00</updated><id>https://leosilvagomes.github.io/repositorio-de-bordo/feed.xml</id><title type="html">Reposit√≥rio de Bordo</title><subtitle>Para aqueles (ou eu) que est√£o lendo... aqui n√£o √© est√°tico, √© fluxo de avan√ßo e regresso.</subtitle><entry><title type="html">Create first issue on GNOME | Second contribution</title><link href="https://leosilvagomes.github.io/repositorio-de-bordo/gnome/2025/06/04/post-35.html" rel="alternate" type="text/html" title="Create first issue on GNOME | Second contribution" /><published>2025-06-04T17:54:14+00:00</published><updated>2025-06-04T17:54:14+00:00</updated><id>https://leosilvagomes.github.io/repositorio-de-bordo/gnome/2025/06/04/post-35</id><content type="html" xml:base="https://leosilvagomes.github.io/repositorio-de-bordo/gnome/2025/06/04/post-35.html"><![CDATA[<p>After some contribution from Andrew, we decided to sum power to make more contributions than just MR and we create one task (issue) based from the first MR from Andrew (https://gitlab.gnome.org/GNOME/gnome-control-center/-/issues/1644).</p>

<p>https://gitlab.gnome.org/GNOME/gnome-control-center/-/issues/3461</p>

<hr />

<p>In the same time I decided to contribute in the new MR, about a toast at configurations at App section in Settings, this needed to be add because when you remove any configuration from any app we didn‚Äôt have any feedback to the final user.</p>

<p>First I decided to see how the Toast component was create in other sections, so I used as a example the Toast used when a background image was deleted.</p>

<p>So I added a list for the itens deleted and create the component with <code class="language-plaintext highlighter-rouge">AdwToast</code> to show the information, create 3 more functions, where one is to render the Toast the others 2 are to treat the callbacks from the toast bottoms.</p>

<p>https://gitlab.gnome.org/GNOME/gnome-control-center/-/merge_requests/3156</p>]]></content><author><name>LeoSilvaGomes</name></author><category term="gnome" /><summary type="html"><![CDATA[After some contribution from Andrew, we decided to sum power to make more contributions than just MR and we create one task (issue) based from the first MR from Andrew (https://gitlab.gnome.org/GNOME/gnome-control-center/-/issues/1644).]]></summary></entry><entry><title type="html">First MR approved in Gnome ü§©</title><link href="https://leosilvagomes.github.io/repositorio-de-bordo/gnome/2025/06/04/post-34.html" rel="alternate" type="text/html" title="First MR approved in Gnome ü§©" /><published>2025-06-04T17:41:14+00:00</published><updated>2025-06-04T17:41:14+00:00</updated><id>https://leosilvagomes.github.io/repositorio-de-bordo/gnome/2025/06/04/post-34</id><content type="html" xml:base="https://leosilvagomes.github.io/repositorio-de-bordo/gnome/2025/06/04/post-34.html"><![CDATA[<p>Desde a √∫ltima atualiza√ß√£o, onde eles estavam esperando o review do pessoal de design para ter certeza que as coisas estavam de acordo com os padr√µes de estilos do GNOME (isso parece ser uma coisa frequente quando se trata de altera√ß√µes de design, ent√£o √© preciso passar por ‚Äú2 revis√µes‚Äù, onde uma √© do c√≥digo e outra do desgin), segue o coment√°rio que se sucederam depois da revis√£o do c√≥digo:</p>

<p><img width="678" alt="Image" src="https://github.com/user-attachments/assets/6697e57e-d85c-4f6e-a38a-f608ca6ec215" /></p>

<p>De qualquer forma o component foi aprovado e estava sendo decidido se eles iriam colocar as altera√ß√µes na √∫ltima LTS ou para a pr√≥xima release.</p>

<p>Segue tamb√©m o link do merge request.</p>

<p>https://gitlab.gnome.org/GNOME/gnome-control-center/-/merge_requests/3129</p>

<p>Para terminar eu finalizai informando o <em>mantainer</em> que ele precisava fechar a issue j√° que o pr j√° tinha sido aceito, o que me parece uma coisa meio de organiza√ß√£o do reposit√≥rio e provavelmente existe v√°rias ocorrencias dessas j√° que o reposit√≥rio tem varias issues abandonadas.</p>

<p>https://gitlab.gnome.org/GNOME/gnome-control-center/-/issues/3440</p>

<hr />

<h3 id="comments">Comments</h3>

<p>Eu gostei bastante da comunidade do GNOME, principalmente pensando nas repostas e na forma de contribuir, eles responderam super r√°pido e acredito que isso foi essencial para a gente entregar algo bem consolidado e de valor para a comunidade.</p>

<p>Al√©m disso, eu acredito que a comunidade est√° bastante aberta para ver novas atualiza√ß√µes, a pipeline de contribui√ß√£o fortaleceu muito esse processo e espero conseguir entrar em contato com os mesmos daqui para frente.</p>]]></content><author><name>LeoSilvaGomes</name></author><category term="gnome" /><summary type="html"><![CDATA[Desde a √∫ltima atualiza√ß√£o, onde eles estavam esperando o review do pessoal de design para ter certeza que as coisas estavam de acordo com os padr√µes de estilos do GNOME (isso parece ser uma coisa frequente quando se trata de altera√ß√µes de design, ent√£o √© preciso passar por ‚Äú2 revis√µes‚Äù, onde uma √© do c√≥digo e outra do desgin), segue o coment√°rio que se sucederam depois da revis√£o do c√≥digo:]]></summary></entry><entry><title type="html">Feedback do dcn31_apg</title><link href="https://leosilvagomes.github.io/repositorio-de-bordo/kernel/2025/06/04/post-33.html" rel="alternate" type="text/html" title="Feedback do dcn31_apg" /><published>2025-06-04T17:35:20+00:00</published><updated>2025-06-04T17:35:20+00:00</updated><id>https://leosilvagomes.github.io/repositorio-de-bordo/kernel/2025/06/04/post-33</id><content type="html" xml:base="https://leosilvagomes.github.io/repositorio-de-bordo/kernel/2025/06/04/post-33.html"><![CDATA[<p>Recebi o feedback do segudo pacote que era refente ao nomeclatura da fun√ß√£o contructor da dcn31_apg. Infelizmete rejeitaram porque alguns testes utilizam o nome antigo da fun√ß√£o e n√£o h√° uma expectativa em muda-la</p>

<p><img width="950" alt="Image" src="https://github.com/user-attachments/assets/ceda714b-a927-4d59-808e-7d964d496ff0" /></p>

<hr />

<p>Nesse aqui eu tive que reenviar o <em>patch</em>  com o comando:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kw send-patch --send -1 --cc=leonardodasigomes@gmail.com --cc=derick.william.moraes@gmail.com -- --no-cover-letter
</code></pre></div></div>

<p>Trocando a mensagem do commit para <strong>RESEND</strong>, assim para eles saberem que eu estou acompanhando o que eles est√£o fazendo com o PR, depois de alguma discuss√µes das poss√≠veis implementa√ß√µes disso e de eu fazer um ajuste novamente no nome da fun√ß√£o, eles decidiram por rejeitar!</p>

<p>Assim foi finalizado meu processo de contribui√ß√£o com o Kernel na disciplina de Software Livre, para mais detalhes pode acessar o meu lore:</p>

<p>https://lore.kernel.org/amd-gfx/?q=Leonardo+da+Silva+Gomes</p>]]></content><author><name>LeoSilvaGomes</name></author><category term="kernel" /><summary type="html"><![CDATA[Recebi o feedback do segudo pacote que era refente ao nomeclatura da fun√ß√£o contructor da dcn31_apg. Infelizmete rejeitaram porque alguns testes utilizam o nome antigo da fun√ß√£o e n√£o h√° uma expectativa em muda-la]]></summary></entry><entry><title type="html">First touch in GNOME project ‚≠ê</title><link href="https://leosilvagomes.github.io/repositorio-de-bordo/gnome/2025/05/21/post-32.html" rel="alternate" type="text/html" title="First touch in GNOME project ‚≠ê" /><published>2025-05-21T14:45:56+00:00</published><updated>2025-05-21T14:45:56+00:00</updated><id>https://leosilvagomes.github.io/repositorio-de-bordo/gnome/2025/05/21/post-32</id><content type="html" xml:base="https://leosilvagomes.github.io/repositorio-de-bordo/gnome/2025/05/21/post-32.html"><![CDATA[<p>Muito diferente do Kernel, que a contribui√ß√£o √© via email (Raiz), no Gnome existe v√°rios sites e uma reposit√≥rio para fazer a gerencia dessas contribui√ß√µes (Nutella):</p>

<ul>
  <li>https://developer.gnome.org/ - Site com guia de contribui√ß√£o</li>
  <li>https://gnome.pages.gitlab.gnome.org/libadwaita/doc/1.7/ - Site para ajudar no entendimento das fun√ß√µes</li>
  <li>https://gitlab.gnome.org/GNOME/ - Reposit√≥rio com os projetos</li>
</ul>

<p>No reposit√≥rio do Gnome √© poss√≠vel ver v√°rios projetos nos quais voc√™ pode contribuir, como o <a href="https://gitlab.gnome.org/GNOME/gnome-calendar">calendar</a>, o <a href="https://gitlab.gnome.org/GNOME/gnome-control-center">settings</a>, dentre outros sistemas que comp√µe o universo do Gnome.</p>

<p>Ap√≥s dar uma olhada em v√°rios reposit√≥rios e conversar com alguns colegas, principalmente o Andrew Ijano sobre a poss√≠veis issues que conseguiriamos contribuir, decidi por fazer uma issue do <code class="language-plaintext highlighter-rouge">Newcommers</code> do <strong>settings</strong>.</p>

<p>O objetivo da issue era padronizar as barras de pesquisa dentro do sistemas, em quest√£o de tamanho e de composi√ß√£o do componente. https://gitlab.gnome.org/GNOME/gnome-control-center/-/issues/3440</p>

<p>Ent√£o clonei o reposit√≥rio e tentei fazer a contribui√ß√£o pelo <strong>Builder</strong> (https://apps.gnome.org/pt-BR/Builder/), esse que √© uma IDE e que j√° proporciona rodar o projeto simulando a interface e funcionalidades do sistema atualizado.</p>

<p>Ap√≥s algumas tentativas e mais conversas com os colegas de sala, foi notado que a melhor forma de contribuir no settings na verdade √© usando uma vm do fedora pelo toolbox e buildando via ninja. Ent√£o refiz as configura√ß√µes do ninja, baixei as bibliotecas e tudo deu certo finalmente.</p>

<hr />

<h2 id="contribui√ß√£o-c√≥digo">Contribui√ß√£o (C√≥digo)</h2>

<p>Ap√≥s investigar o que poderia estar causando essa despadroniza√ß√£o nas barras de pesquisa, percebi que eles utilizam <code class="language-plaintext highlighter-rouge">.ui</code> para gerir boa parte da visuali√ß√£o e sua propriedades e diferente do <code class="language-plaintext highlighter-rouge">html</code> que passamos a classe e alteramos o estilo no <code class="language-plaintext highlighter-rouge">css</code>, aqui as propriedades √© declarada fora da tag principal e j√° √© especificado as propriedades de estilo.</p>

<pre><code class="language-ui">&lt;object class="GtkSearchEntry" id="language_filter_entry"&gt;
     &lt;property name="placeholder_text" translatable="yes"&gt;Language or country&lt;/property&gt;
     &lt;property name="width_chars"&gt;30&lt;/property&gt;
+    &lt;property name="hexpand"&gt;True&lt;/property&gt;
+    &lt;property name="margin-start"&gt;6&lt;/property&gt;
+    &lt;property name="margin-end"&gt;6&lt;/property&gt;
</code></pre>

<p>No total eu alterei 5 componentes, que estavam despadronizados como pode ser visto abaixo</p>

<h3 id="antes">Antes</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: left">cc-language-chooser</th>
      <th style="text-align: left">cc-tz-dialog</th>
      <th style="text-align: left">cc-format-chooser</th>
      <th style="text-align: left">pp-new-dialog</th>
      <th style="text-align: left">cc-input-chooser</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><img src="https://github.com/user-attachments/assets/5e69b206-79a3-460d-b6e4-093f9fbf6a44" alt="Image" /></td>
      <td style="text-align: left"><img src="https://github.com/user-attachments/assets/754d066c-6478-4f98-9dbd-fc18990b308d" alt="Image" /></td>
      <td style="text-align: left"><img src="https://github.com/user-attachments/assets/ca5da5a2-cf31-40f1-9bf2-d0e0dfdb9ffe" alt="Image" /></td>
      <td style="text-align: left"><img src="https://github.com/user-attachments/assets/2a9f3220-be25-469e-bca9-c27061a6ec15" alt="Image" /></td>
      <td style="text-align: left"><img src="https://github.com/user-attachments/assets/dd343d4f-830c-4b8a-8174-12ac82f72c10" alt="Image" /></td>
    </tr>
  </tbody>
</table>

<h3 id="depois">Depois</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: left">cc-language-chooser</th>
      <th style="text-align: left">cc-tz-dialog</th>
      <th style="text-align: left">cc-format-chooser</th>
      <th style="text-align: left">pp-new-dialog</th>
      <th style="text-align: left">cc-input-chooser</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><img src="https://github.com/user-attachments/assets/d945c478-ad4c-46fd-a3bb-4f41cfbeab6d" alt="Image" /></td>
      <td style="text-align: left"><img src="https://github.com/user-attachments/assets/87de52c5-3bf3-4e84-8b1e-2bc4158e1099" alt="Image" /></td>
      <td style="text-align: left"><img src="https://github.com/user-attachments/assets/648b074f-c124-4a07-80c4-ffe5f18fce13" alt="Image" /></td>
      <td style="text-align: left"><img src="https://github.com/user-attachments/assets/c200b808-f699-4456-aaa6-2ef0b08b287b" alt="Image" /></td>
      <td style="text-align: left"><img src="https://github.com/user-attachments/assets/73c5e398-0964-4fbb-939b-b388af911f12" alt="Image" /></td>
    </tr>
  </tbody>
</table>

<p>ap√≥s isso eu abri o PR e j√° recebi alguns feedbacks sobre a mensagem e do c√≥digo, mas estou esperando o feedback dos designs para confirmar o estilo proposto.</p>

<p>https://gitlab.gnome.org/GNOME/gnome-control-center/-/merge_requests/3129</p>]]></content><author><name>LeoSilvaGomes</name></author><category term="gnome" /><summary type="html"><![CDATA[Muito diferente do Kernel, que a contribui√ß√£o √© via email (Raiz), no Gnome existe v√°rios sites e uma reposit√≥rio para fazer a gerencia dessas contribui√ß√µes (Nutella):]]></summary></entry><entry><title type="html">drm/adm/display Feedback patch</title><link href="https://leosilvagomes.github.io/repositorio-de-bordo/kernel/2025/05/21/post-31.html" rel="alternate" type="text/html" title="drm/adm/display Feedback patch" /><published>2025-05-21T14:05:24+00:00</published><updated>2025-05-21T14:05:24+00:00</updated><id>https://leosilvagomes.github.io/repositorio-de-bordo/kernel/2025/05/21/post-31</id><content type="html" xml:base="https://leosilvagomes.github.io/repositorio-de-bordo/kernel/2025/05/21/post-31.html"><![CDATA[<p>Ap√≥s enviar o patch no m√™s passado, eu n√£o tinha recebido nenhuma resposta dos mantenedores se o patch estava sendo revisado ou n√£o. Isso porque o meu patch j√° tinha aparecido <a href="https://lore.kernel.org/amd-gfx/20250423153010.20019-1-leonardodasigomes@gmail.com/">lore</a>.</p>

<p>Falei com o monitor (David) sobre o que estava acontecendo e ele me recomendou esperar umas 3 semanas que √© o prazo m√°ximo que pode demorar uma revis√£o tendo em vista o tipo de modica√ß√£o e a complexidade, ou porque eles podem ter passado o patch despercebido dentre o tanto de contribui√ß√£o que eles recebem. Dado a terceira semana decidimos por fazer o <strong>RESEND</strong>, ent√£o fizemos o mesmo commit da ultima vez</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kw send-patch <span class="nt">--send</span> <span class="nt">-2</span> <span class="nt">--cc</span><span class="o">=</span>leonardodasigomes@gmail.com <span class="nt">--cc</span><span class="o">=</span>derick.william.moraes@gmail.com <span class="nt">--</span> <span class="nt">--no-cover-letter</span>
</code></pre></div></div>

<p>mas mudando o t√≠tulo do commit para RESEND, ou seja, ao inv√©s de:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[PATCH 2/2] drm/amd/display: Adjust set_value function with prefix to help in ftrace
</code></pre></div></div>

<p>ficou</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[PATCH 2/2 RESEND] drm/amd/display: Adjust set_value function with prefix to help in ftrace
</code></pre></div></div>
<p>Ap√≥s o reenvio n√£o demorou um dia para eles me responderem para fazer uma altera√ß√£o no nome da fun√ß√£o. Eu tinha decidido por colocar o nome da fun√ß√£o como <code class="language-plaintext highlighter-rouge">dal_hw_gpio_set_config</code>, mas o arquivo que eu estava modificando na verdade era o <code class="language-plaintext highlighter-rouge">hw_hpd.c</code> o que eles pediram para na verdade a gente colocar no nome da fun√ß√£o como <code class="language-plaintext highlighter-rouge">dal_hw_hpd_set_config</code>.</p>

<p>Ap√≥s reenvio com as altera√ß√µes que eles pediram, ent√£o recebi uma mensagem do <strong>Alex Deucher</strong> com a mensagem de confirma√ß√£o‚Ä¶</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Applied the series.  Thanks!
</code></pre></div></div>

<p><img width="780" alt="Image" src="https://github.com/user-attachments/assets/7097a077-f2dd-44ef-af4b-9f4bff817ef1" /></p>

<hr />

<h2 id="plot-twist">Plot twist</h2>

<p>No meu processo de contibui√ß√£o eu criei um ‚Äúregex‚Äù para conseguir identificar mais problemas como esse que eu tive onde a fun√ß√£o n√£o est√° muito relacionada <code class="language-plaintext highlighter-rouge">git grep -P '\.\b(\w+)\b = \b\1\b,'</code>, que pode ser usado em outros anos da mat√©ria, nesse processo eu estava testando se as fun√ß√µes encontradas realmente faziam sentido e acabei criando o commit para as duas fun√ß√µes acima! Mas acabei n√£o enviando o patch‚Ä¶ Ent√£o o RESEND do patch na verdade √© outro patch, que eu estava testando esse regex e acabei enviando sem querer (E que deu tudo certo).</p>

<p>Ent√£o s√£o 2 patchs:</p>
<ul>
  <li>Um patch corrigindo as fun√ß√µes <code class="language-plaintext highlighter-rouge">set_config</code> e <code class="language-plaintext highlighter-rouge">get_value</code> no arquivo <code class="language-plaintext highlighter-rouge">hw_hpd.c</code>, para n√£o possuir nome ambiguo e ter uma rastreabilidade melhor</li>
  <li>Um patch corrigindo a fun√ß√£o <code class="language-plaintext highlighter-rouge">dcn31_apg_construct</code> para sinalizar que essa fun√ß√£o √© do dcn31.</li>
</ul>

<p>O primeiro patch foi enviado, revisado, atualizado e recebeu uma mensagem de approve.
J√° o segundo patch foi reenviado e est√° esperando a revis√£o.</p>

<p>Foi uma experiencia muito boa, principalmente com o kw facilitou muito o reenvio do patch üòÑ</p>]]></content><author><name>LeoSilvaGomes</name></author><category term="kernel" /><summary type="html"><![CDATA[Ap√≥s enviar o patch no m√™s passado, eu n√£o tinha recebido nenhuma resposta dos mantenedores se o patch estava sendo revisado ou n√£o. Isso porque o meu patch j√° tinha aparecido lore.]]></summary></entry><entry><title type="html">Update patch üëì - Review by class mentors</title><link href="https://leosilvagomes.github.io/repositorio-de-bordo/kernel/2025/04/23/post-30.html" rel="alternate" type="text/html" title="Update patch üëì - Review by class mentors" /><published>2025-04-23T15:43:18+00:00</published><updated>2025-04-23T15:43:18+00:00</updated><id>https://leosilvagomes.github.io/repositorio-de-bordo/kernel/2025/04/23/post-30</id><content type="html" xml:base="https://leosilvagomes.github.io/repositorio-de-bordo/kernel/2025/04/23/post-30.html"><![CDATA[<p>Ap√≥s o envio do patch para o email <code class="language-plaintext highlighter-rouge">freesoftware2025@gmail.com</code> que corresponde ao email da disciplina, recebi meu primeiro review.</p>

<p>O primeiro ajuste que foi pedido era sobre a mensagem do commit que incluia dua corre√ß√µes:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>On 4/23/25 07:43, Leonardo Gomes wrote:
&gt; From: Leonardo da Silva Gomes &lt;[leonardodasigomes@gmail.com](mailto:leonardodasigomes@gmail.com)&gt;
&gt;
&gt; This commmit adjust the dcn31_apg construct function name from
&gt; 'apg31_construct' to 'dcn31_apg_construct'.

Aqui, use um verbo no imperativo. Ent√£o ao inv√©s de "This commit
adjust", use "Adjust the dcn...".
</code></pre></div></div>

<p>e adicionar o <code class="language-plaintext highlighter-rouge">Signed-off-by</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Signed-off-by: Leonardo da Silva Gomes &lt;<span class="o">[</span>leonardodasigomes@gmail.com]<span class="o">(</span>mailto:leonardodasigomes@gmail.com<span class="o">)&gt;</span>
Co-developed-by: Derick Frias &lt;<span class="o">[</span>derick.william.moraes@gmail.com]<span class="o">(</span>mailto:derick.william.moraes@gmail.com<span class="o">)&gt;</span>
Signed-off-by: Derick Frias &lt;<span class="o">[</span>derick.william.moraes@gmail.com]<span class="o">(</span>mailto:derick.william.moraes@gmail.com<span class="o">)&gt;</span>
</code></pre></div></div>

<p>O segundo coment√°rio e ajuste era sobre o padr√£o do titulo do <em>commit</em> para usar sempre colocar o <em>path</em> (no meu caso <code class="language-plaintext highlighter-rouge">drm/amd/display:</code>) para facilitar a revis√£o.</p>

<hr />

<p>Depois dessa revis√£o j√° fiz os ajustes e j√° recebi a aprova√ß√£o do monitor. Por fim enviei para o mantenedores do modulo e que v√£o realmente revisar o meu patch com o comando:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kw send-patch <span class="nt">--send</span> <span class="nt">-1</span> <span class="nt">--cc</span><span class="o">=</span>leonardodasigomes@gmail.com <span class="nt">--cc</span><span class="o">=</span>derick.william.moraes@gmail.com
</code></pre></div></div>]]></content><author><name>LeoSilvaGomes</name></author><category term="kernel" /><summary type="html"><![CDATA[Ap√≥s o envio do patch para o email freesoftware2025@gmail.com que corresponde ao email da disciplina, recebi meu primeiro review.]]></summary></entry><entry><title type="html">First patch ‚≠ê - Adjust prefix of dcn31_apg construct function name</title><link href="https://leosilvagomes.github.io/repositorio-de-bordo/kernel/2025/04/03/post-29.html" rel="alternate" type="text/html" title="First patch ‚≠ê - Adjust prefix of dcn31_apg construct function name" /><published>2025-04-03T17:51:29+00:00</published><updated>2025-04-03T17:51:29+00:00</updated><id>https://leosilvagomes.github.io/repositorio-de-bordo/kernel/2025/04/03/post-29</id><content type="html" xml:base="https://leosilvagomes.github.io/repositorio-de-bordo/kernel/2025/04/03/post-29.html"><![CDATA[<p><strong>Obs inicial:</strong> Esse relato faz parte da disciplina de Software Livre ministrada pelo Professor Paulo Meirelles dada no IME - USP. Alguns coment√°rios s√£o referentes a prazos que a pr√≥pria disciplina delimita.</p>

<p>Finalmente chegamos na nossa contribui√ß√£o para o kernel, depois de fazer v√°rias configura√ß√µes e decidir utilizar o <em>iio</em> (em primeiro momento).</p>

<p><code class="language-plaintext highlighter-rouge">Por volta da primeira semana de abril</code>
Eu e minha dupla come√ßamos a passar pelo <em>pad</em> de contribui√ß√£o e vimos algumas contribui√ß√µes bem tranquilas. Nosso primeiro contato foi com o ajuste de algumas fun√ß√µes em alguma parte do modulo. Rodamos <code class="language-plaintext highlighter-rouge">git grep &lt;o nome da fun√ß√£o&gt;</code> que queriamos modificar e acabamos encontrando algumas coisas que poderiam ser modificadas, entramos em contato com o monitor e ele nos orientou a continuar explorando e esperar pela proxima aula para acompanharmos a quest√£o do envio do patch.</p>

<p>Esperado a aula, minha dupla pode comparecer a disciplina e eu estava em um evento, nesse sentido ap√≥s a aula me reuni com minha dupla para receber orienta√ß√µes de pr√≥ximo passo e foi decidido que iriamos fazer altera√ß√µes agora em outra parte do kernel‚Ä¶ agora sendo o <em>drm</em> o nosso foco.</p>

<p>Nesse momento entramos de f√©rias (voltei para minha cidade natal e deixei minha maquina com linux ligada para acessar remotamente), tentei iniciar a contribui√ß√£o, mas de primeiro eu n√£o consegui acessar o pad, ent√£o entrei em contato com o monitor que me ajudou enviando o pdf do pad. A partir desse ponto eu consegui iniciar algumas coisas a respeito de clonar a nova ramifica√ß√£o, fazer a procura dos arquivos necess√°rios para a modifica√ß√£o do problema que meu amigo tinha escolhido que no caso era <code class="language-plaintext highlighter-rouge">Code Refactor: Add prefix to DC functions to improve the debug with ftrace</code>.</p>

<hr />

<h3 id="vamos-come√ßar-a-contribui√ß√£o">Vamos come√ßar a contribui√ß√£o</h3>

<p>Depois de preparar o ambiente para agora sim contribuir na ramifica√ß√£o certa, no caso o <em>drm</em>, eu consegui fazer um <code class="language-plaintext highlighter-rouge">git grep dcn</code> que foi uma das indica√ß√µes dos monitores para altera√ß√£o.</p>

<p>Apareceu bastante resultado e acabei indo no olho para ver qual funcionava melhor, fui passando por v√°rios arquivos e encontrei dois que poderiam funcionar:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span> drivers/gpu/drm/amd/display/dc/dcn31/dcn31_apg.c
<span class="o">&gt;</span> drivers/gpu/drm/amd/display/dc/dccg/dcn20/dcn20_dccg.c
</code></pre></div></div>

<p>Confirmei com o eu amigo sobre a minha hipotese e disse para a gente ir tentando cada um em um para a gente infrentar a barreiras e ir falando para o outro a cada passo‚Ä¶</p>

<p><strong>Obs blackout:</strong> Como eu estava remoto eu estava com medo de meu computador desligar, ent√£o o dia chegou, no meio da minha visita a minha fam√≠lia eu fiquei off ao meu progresso, mas j√° tinha dado passos bem interessantes.</p>

<p>Quando voltei a S√£o Paulo, retomei o desenvolvimento e percebi um erro que n√£o tinha notado, o <em>drm</em> n√£o estava <em>buildando</em>, falei com o monitor e ele me disse que isso era problema com a arquitetura da vm, que no caso estava como <code class="language-plaintext highlighter-rouge">arm64</code>, fiz a modifica√ß√£o das configs para rodar em <code class="language-plaintext highlighter-rouge">x86_64</code> rodando:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span> kw init <span class="nt">--template</span>
<span class="o">&gt;</span> make <span class="nv">ARCH</span><span class="o">=</span>x86_64 allnoconfig 
</code></pre></div></div>

<p>Ap√≥s isso, consegui buildar o <em>drm</em> tranquilamente e comecei as modifica√ß√µes do arquivo <code class="language-plaintext highlighter-rouge">dcn31_apg</code>, mudei ent√£o a fun√ß√£o <code class="language-plaintext highlighter-rouge">construct</code> que era a fun√ß√£o que estava com o nome faltando informa√ß√£o para o <em>ftrace</em>, a fun√ß√£o estava com a declara√ß√£o como <code class="language-plaintext highlighter-rouge">apg31_construct</code> e foi modificada para <code class="language-plaintext highlighter-rouge">dcn31_apg_construct</code>. modifiquei no <code class="language-plaintext highlighter-rouge">.c</code> e no <code class="language-plaintext highlighter-rouge">.h</code> como vi em um exemplo que o monitor compartilhou.</p>

<p>Ent√£o ap√≥s as modifica√ß√µes eu habilitei todas as dependencias e modulos para que eu conseguisse testar minhas altera√ß√µes, modifiquei pelo <em>kw</em> com o comando <code class="language-plaintext highlighter-rouge">kw build --menu</code>. Nesse momento eu fiz a busca pelo <code class="language-plaintext highlighter-rouge">F8</code> e procurei pelo <code class="language-plaintext highlighter-rouge">DRM_AMD_DC</code>, <em>config</em> que minha altera√ß√£o fazia parte, descobri que essa <em>config</em> apenas caminha pelo <em>path</em> de onde minha altera√ß√£o estava at√© encontrar um arquivo <code class="language-plaintext highlighter-rouge">Kconfig</code>, ou seja:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd </span>drivers/gpu/drm/amd/display/dc/dcn31
drivers/gpu/drm/amd/display/dc/dcn31/ <span class="nv">$ </span><span class="nb">cd</span> ..
drivers/gpu/drm/amd/display/dc/ <span class="nv">$ </span><span class="nb">ls</span>                <span class="c"># n√£o encontrei Kconfig, repete cd .. at√© encontrar</span>
</code></pre></div></div>

<p>Ap√≥s habilitado, rodei o build e pela minha surpresa e felicidade deu erro ‚≠ê , significa que o modulo foi habilitado e que agora eu tinha algumas coisas para ajustar, ent√£o segue o passo a passo do que aconteceu:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Erro nos arquivos que dependem da fun√ß√£o alterada</th>
      <th style="text-align: left"><code class="language-plaintext highlighter-rouge">git grep</code> para buscar arquivos que preciso modificar</th>
      <th style="text-align: left">Resultado das altera√ß√µes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><img src="https://github.com/user-attachments/assets/e7aa291a-9981-434d-bf66-5d53b6cedd05" alt="Image" /></td>
      <td style="text-align: left"><img src="https://github.com/user-attachments/assets/1b76e7ba-7598-421a-8f2d-cb946144d194" alt="Image" /></td>
      <td style="text-align: left"><img src="https://github.com/user-attachments/assets/d8394a7d-b19d-4412-b572-93143d84c93f" alt="Image" /></td>
    </tr>
  </tbody>
</table>

<p>Ent√£o ap√≥s fazer as corre√ß√µes eu fiz o:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span> git add <span class="nb">.</span>
<span class="o">&gt;</span> git commit                       <span class="c"># escrevi a mensagem detalhada</span>
</code></pre></div></div>

<p>Ap√≥s refazer a mensagem de commit v√°rias vezes at√© ficar satisfeito eu rodei o comando para enviar o email:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span> kw send-patch <span class="nt">--send</span> <span class="nt">-1</span> <span class="nt">--simulate</span> <span class="nt">--private</span> <span class="nt">--to</span><span class="o">=</span>freesoftware2025@gmail.com
</code></pre></div></div>

<p>üéâ  AEEE tudo certo ~Infelizmente n√£o~</p>

<p>Eu tinha deixado o <code class="language-plaintext highlighter-rouge">--simulate</code>no comando e n√£o tinha percebido que na verdade eu n√£o tinha enviado e apenas simulado o envio, ent√£o eu finalmente removi esse <em>flag</em> fiz as configura√ß√µes do <em>smtp</em> que precisava e do meu email google (com a ajuda do monitor) e finalmente consegui enviar com o comando:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span> kw send-patch <span class="nt">--send</span> <span class="nt">-1</span> <span class="nt">--private</span> <span class="nt">--to</span><span class="o">=</span>freesoftware2025@gmail.com <span class="nt">--cc</span><span class="o">=</span>leonardodasigomes@gmail.com
</code></pre></div></div>

<hr />

<h3 id="coment√°rios">Coment√°rios</h3>

<p>Foi muito tranquilo a contribui√ß√£o em si, o que deu mais problema foi a quest√£o de modifica√ß√£o e mudan√ßas de rotas ocorridas nesse processo que ocasionou em mais configura√ß√µes de ambiente. Al√©m disso houve um atraso por parte da indisponibilidade da minha maquina remota por algum tempo, mas nada que n√£o fosse resolvido um tempinho depois.</p>]]></content><author><name>LeoSilvaGomes</name></author><category term="kernel" /><summary type="html"><![CDATA[Obs inicial: Esse relato faz parte da disciplina de Software Livre ministrada pelo Professor Paulo Meirelles dada no IME - USP. Alguns coment√°rios s√£o referentes a prazos que a pr√≥pria disciplina delimita.]]></summary></entry><entry><title type="html">Mexendo com drivers ‚öôÔ∏è</title><link href="https://leosilvagomes.github.io/repositorio-de-bordo/kernel/2025/03/26/post-28.html" rel="alternate" type="text/html" title="Mexendo com drivers ‚öôÔ∏è" /><published>2025-03-26T21:01:57+00:00</published><updated>2025-03-26T21:01:57+00:00</updated><id>https://leosilvagomes.github.io/repositorio-de-bordo/kernel/2025/03/26/post-28</id><content type="html" xml:base="https://leosilvagomes.github.io/repositorio-de-bordo/kernel/2025/03/26/post-28.html"><![CDATA[<p>Como expectativa da aula, eu e minha dupla terminamos nossas coisas na aula e isso √© muito bom porque trocamos experi√™ncias que tivemos fora da disciplina tamb√©m. Derick estava me explicando um pouco mais sobre os <em>drivers</em> e isso foi muito bom para entender o exercicio no todo.</p>

<p>Hoje fizemos um tutorial de criar um drive de character na √°rvore do <strong>iio</strong> (https://flusp.ime.usp.br/kernel/char-drivers-intro/). S√≥ teve um momento que eu travei‚Ä¶ no momento de buildar o modulo, onde quando fui copiar o arquivo <code class="language-plaintext highlighter-rouge">.ko</code> para dentro da <em>vm</em> acabei copiando para um arquivo e n√£o para a pasta:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Errado sem o barra no final</span>
<span class="nb">cp </span>simple_char.ko /lib/modules/<span class="sb">`</span><span class="nb">uname</span> <span class="nt">-r</span><span class="sb">`</span>/kernel/drivers/char
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Certo com o barra no final</span>
<span class="nb">cp </span>simple_char.ko /lib/modules/<span class="sb">`</span><span class="nb">uname</span> <span class="nt">-r</span><span class="sb">`</span>/kernel/drivers/char/
</code></pre></div></div>

<p>Ap√≥s isso foi muito tranquilo terminar o tutorial‚Ä¶ por fim ao rodar os arquivos <code class="language-plaintext highlighter-rouge">.c</code> o buffer rodou umas saidas estranhas, os monitores (David e Rafael) respoderam que pode ser algo da execu√ß√£o da <em>vm</em>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@localhost:~# ./read_prog simple_char_node
Read buffer: ÔøΩÓ°†ÔøΩÔøΩ
root@localhost:~# ./write_prog simple_char_node
Error: 9wrote <span class="nt">-1</span> bytes to buffer
</code></pre></div></div>

<p>Mas finalizaram que tava tudo certo, que no final tanto o <em>driver</em> que criamos quando o c√≥digo est√£o <strong>10</strong>.</p>

<hr />

<h3 id="sugest√µes-de-corre√ß√µes">Sugest√µes de corre√ß√µes</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@host
aarch64-linux-gnu-gcc read_prog.c <span class="nt">-o</span> read_prog
scp read_prog root@&lt;VM-IP-ADDRESS&gt;:~/
@VM
root@localhost:~# ./read_prog simple_char_node
</code></pre></div></div>

<p>Esse c√≥digo em cima n√£o segue uma consist√™ncia dos outros tutoriais, acredito que deva separar entre o que √© rodado no host e o que √© rodado na VM</p>

<p>Al√©m disso, como o tutorial √© para primeiro contato do desenvolvedor acredito que pode ser referenciado os arquivos de tutoriais anteriores quando necess√°rio, como no momento em que precisamos copiar o modulo para dentro da <em>vm</em> e <em>buildar</em>.</p>]]></content><author><name>LeoSilvaGomes</name></author><category term="kernel" /><summary type="html"><![CDATA[Como expectativa da aula, eu e minha dupla terminamos nossas coisas na aula e isso √© muito bom porque trocamos experi√™ncias que tivemos fora da disciplina tamb√©m. Derick estava me explicando um pouco mais sobre os drivers e isso foi muito bom para entender o exercicio no todo.]]></summary></entry><entry><title type="html">Criando o primeiro modulo no kernel</title><link href="https://leosilvagomes.github.io/repositorio-de-bordo/kernel/2025/03/25/post-27.html" rel="alternate" type="text/html" title="Criando o primeiro modulo no kernel" /><published>2025-03-25T17:38:47+00:00</published><updated>2025-03-25T17:38:47+00:00</updated><id>https://leosilvagomes.github.io/repositorio-de-bordo/kernel/2025/03/25/post-27</id><content type="html" xml:base="https://leosilvagomes.github.io/repositorio-de-bordo/kernel/2025/03/25/post-27.html"><![CDATA[<p>J√° vou come√ßar dizendo que essa foi de longe a parte mais demorada e n√£o √© porque o tutorial n√£o estava preparado para possiveis erros de principiantes.</p>

<p>Antes de eu falar dos erros que aconteceu, gostaria de come√ßar pelas d√∫vidas que n√£o consegui resposta de primeira e que n√£o apresentava no tutorial</p>

<ul>
  <li>O comando <code class="language-plaintext highlighter-rouge">kw build</code> possui cache?</li>
  <li>Quando que eu vou precisar fazer o <code class="language-plaintext highlighter-rouge">clean</code>? Seria como uma imagem do docker e a partir disso vc precisar <em>rebuild</em> tudo</li>
</ul>

<p>Agora bora para as partes que realmente me travaram:</p>

<p>No momento de instalar os novos modulos na imagem foi copiado os comandos de se executar sem o <em>kw</em>, entretanto n√£o foi avisado que era preciso, estar com a vm desligada e o que seria <code class="language-plaintext highlighter-rouge">$VM_MOUNT_POINT</code>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir</span> <span class="s2">"</span><span class="k">${</span><span class="nv">VM_DIR</span><span class="k">}</span><span class="s2">/arm64_rootfs"</span>
<span class="c">### ADAPT THE COMMAND BELOW ###</span>
<span class="nb">sudo </span>guestmount <span class="nt">--rw</span> <span class="nt">--add</span> <span class="s2">"</span><span class="k">${</span><span class="nv">VM_DIR</span><span class="k">}</span><span class="s2">/arm64_img.qcow2"</span> <span class="nt">--mount</span> /dev/&lt;rootfs&gt; <span class="s2">"</span><span class="k">${</span><span class="nv">VM_DIR</span><span class="k">}</span><span class="s2">/arm64_rootfs"</span> <span class="c"># mount the VM `rootfs` to the given mount point in read and write mode (this could take a while)</span>
<span class="nb">sudo</span> <span class="nt">--preserve-env</span> make <span class="nt">-C</span> <span class="s2">"</span><span class="k">${</span><span class="nv">IIO_TREE</span><span class="k">}</span><span class="s2">"</span> <span class="nv">INSTALL_MOD_PATH</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">VM_DIR</span><span class="k">}</span><span class="s2">/arm64_rootfs"</span> modules_install <span class="c"># install modules to inside the VM</span>
<span class="nb">sudo </span>guestunmount <span class="s2">"</span><span class="nv">$VM_MOUNT_POINT</span><span class="s2">"</span> <span class="c"># unmount the VM `rootfs`</span>
</code></pre></div></div>

<p>O segundo erro foi resolvido rapidamente, eu adicionei no activate o <code class="language-plaintext highlighter-rouge">VM_MOUNT_POINT</code> como <code class="language-plaintext highlighter-rouge">${VM_DIR}/arm64_rootfs</code> e assim ele apontava para a pasta certinho, mas depois de rodar esses comandos minha vm n√£o executava de jeito nenhum. Tive que pedir ajuda para o <em>David</em>, mas eu j√° estava no meio de refazer a vm toda dnv, ent√£o ele me ajudou mais a me mostrar uns comandos do vim que n√£o conhecia</p>

<p>Depois que montei a vm dnv deu tudo certo üòÑ . Finalizei o tutorial e a parte de criar o modulo finalmente deu certo e foi bem tranquila.</p>]]></content><author><name>LeoSilvaGomes</name></author><category term="kernel" /><summary type="html"><![CDATA[J√° vou come√ßar dizendo que essa foi de longe a parte mais demorada e n√£o √© porque o tutorial n√£o estava preparado para possiveis erros de principiantes.]]></summary></entry><entry><title type="html">Primeiro apresenta√ß√£o Grupo de Sistemas</title><link href="https://leosilvagomes.github.io/repositorio-de-bordo/pessoal/2025/03/20/post-26.html" rel="alternate" type="text/html" title="Primeiro apresenta√ß√£o Grupo de Sistemas" /><published>2025-03-20T17:38:42+00:00</published><updated>2025-03-20T17:38:42+00:00</updated><id>https://leosilvagomes.github.io/repositorio-de-bordo/pessoal/2025/03/20/post-26</id><content type="html" xml:base="https://leosilvagomes.github.io/repositorio-de-bordo/pessoal/2025/03/20/post-26.html"><![CDATA[<p>Hoje estava muito nervoso. A semana toda estava muito cansado com a expectativa dessa apresenta√ß√£o, quase n√£o consegui ler as coisas que precisava, preciso conseguir controlar isso o mais r√°pido poss√≠vel. De qualquer forma, acredito que minha apresenta√ß√£o foi bastante satisfat√≥ria, tem uma parte do planejamento da apresenta√ß√£o aqui no blog, mas o que importa para mim √© se eu consegui passar o conte√∫do que eu realmente queria passar.</p>

<p>Vesti uma roupa bonitinha, fiquei o mais confort√°vel poss√≠vel e vi que as pessoas se interessaram muito e isso eu fiquei bastante contente! Pude responder as perguntas que me fizeram e gostaria at√© de discutir para onde isso est√° indo tamb√©m. Paulo me deu a ideia de vicular como as estruturas de times DevOps e MLOps est√£o sendo afetadas pelo uso de IA (acredito fielmente que isso possa me motivar bastante).</p>

<p>Que a pr√≥xima seja ainda melhor, obrigado por hoje.</p>]]></content><author><name>LeoSilvaGomes</name></author><category term="pessoal" /><summary type="html"><![CDATA[Hoje estava muito nervoso. A semana toda estava muito cansado com a expectativa dessa apresenta√ß√£o, quase n√£o consegui ler as coisas que precisava, preciso conseguir controlar isso o mais r√°pido poss√≠vel. De qualquer forma, acredito que minha apresenta√ß√£o foi bastante satisfat√≥ria, tem uma parte do planejamento da apresenta√ß√£o aqui no blog, mas o que importa para mim √© se eu consegui passar o conte√∫do que eu realmente queria passar.]]></summary></entry></feed>