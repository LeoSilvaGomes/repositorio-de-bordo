---
layout: post
title: drm/adm/display Feedback patch
date: 2025-05-21T14:05:24Z
author: LeoSilvaGomes
categories: kernel
---
Ap√≥s enviar o patch no m√™s passado, eu n√£o tinha recebido nenhuma resposta dos mantenedores se o patch estava sendo revisado ou n√£o. Isso porque o meu patch j√° tinha aparecido [lore](https://lore.kernel.org/amd-gfx/20250423153010.20019-1-leonardodasigomes@gmail.com/).

Falei com o monitor (David) sobre o que estava acontecendo e ele me recomendou esperar umas 3 semanas que √© o prazo m√°ximo que pode demorar uma revis√£o tendo em vista o tipo de modica√ß√£o e a complexidade, ou porque eles podem ter passado o patch despercebido dentre o tanto de contribui√ß√£o que eles recebem. Dado a terceira semana decidimos por fazer o **RESEND**, ent√£o fizemos o mesmo commit da ultima vez

``` bash
kw send-patch --send -2 --cc=leonardodasigomes@gmail.com --cc=derick.william.moraes@gmail.com -- --no-cover-letter
```

mas mudando o t√≠tulo do commit para RESEND, ou seja, ao inv√©s de:

```
[PATCH 2/2] drm/amd/display: Adjust set_value function with prefix to help in ftrace
```

ficou

```
[PATCH 2/2 RESEND] drm/amd/display: Adjust set_value function with prefix to help in ftrace
```
Ap√≥s o reenvio n√£o demorou um dia para eles me responderem para fazer uma altera√ß√£o no nome da fun√ß√£o. Eu tinha decidido por colocar o nome da fun√ß√£o como `dal_hw_gpio_set_config`, mas o arquivo que eu estava modificando na verdade era o `hw_hpd.c` o que eles pediram para na verdade a gente colocar no nome da fun√ß√£o como `dal_hw_hpd_set_config`.

Ap√≥s reenvio com as altera√ß√µes que eles pediram, ent√£o recebi uma mensagem do **Alex Deucher** com a mensagem de confirma√ß√£o...

```
Applied the series.  Thanks!
```

<img width="780" alt="Image" src="https://github.com/user-attachments/assets/7097a077-f2dd-44ef-af4b-9f4bff817ef1" />

----

## Plot twist

No meu processo de contibui√ß√£o eu criei um "regex" para conseguir identificar mais problemas como esse que eu tive onde a fun√ß√£o n√£o est√° muito relacionada `git grep -P '\.\b(\w+)\b = \b\1\b,'`, que pode ser usado em outros anos da mat√©ria, nesse processo eu estava testando se as fun√ß√µes encontradas realmente faziam sentido e acabei criando o commit para as duas fun√ß√µes acima! Mas acabei n√£o enviando o patch... Ent√£o o RESEND do patch na verdade √© outro patch, que eu estava testando esse regex e acabei enviando sem querer (E que deu tudo certo).

Ent√£o s√£o 2 patchs:
- Um patch corrigindo as fun√ß√µes `set_config` e `get_value` no arquivo `hw_hpd.c`, para n√£o possuir nome ambiguo e ter uma rastreabilidade melhor
- Um patch corrigindo a fun√ß√£o `dcn31_apg_construct` para sinalizar que essa fun√ß√£o √© do dcn31.

O primeiro patch foi enviado, revisado, atualizado e recebeu uma mensagem de approve.
J√° o segundo patch foi reenviado e est√° esperando a revis√£o.

Foi uma experiencia muito boa, principalmente com o kw facilitou muito o reenvio do patch üòÑ 
